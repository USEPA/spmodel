<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Predicted values based on a random forest spatial residual fitted model object."><title>Random forest spatial residual model predictions (random forest regression Kriging) — predict.spmodRF • spmodel</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Random forest spatial residual model predictions (random forest regression Kriging) — predict.spmodRF"><meta property="og:description" content="Predicted values based on a random forest spatial residual fitted model object."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">spmodel</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/basics.html">An Overview of Basic Features in spmodel</a>
    <a class="dropdown-item" href="../articles/guide.html">A Detailed Guide to spmodel</a>
    <a class="dropdown-item" href="../articles/technical.html">Technical Details</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/USEPA/spmodel/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Random forest spatial residual model predictions (random forest regression Kriging)</h1>
      <small class="dont-index">Source: <a href="https://github.com/USEPA/spmodel/blob/HEAD/R/predict.R" class="external-link"><code>R/predict.R</code></a></small>
      <div class="d-none name"><code>predict.spmodRF.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Predicted values based on a random forest spatial residual fitted model object.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for spmodRF</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">object</span>, <span class="va">newdata</span>, <span class="va">local</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for spmodRF_list</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">object</span>, <span class="va">newdata</span>, <span class="va">local</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>object</dt>
<dd><p>A fitted model object from <code><a href="splmRF.html">splmRF()</a></code> or <code><a href="spautorRF.html">spautorRF()</a></code>.</p></dd>


<dt>newdata</dt>
<dd><p>A data frame or <code>sf</code> object in which to
look for variables with which to predict. If a data frame, <code>newdata</code>
must contain all variables used by <code>formula(object)</code> and all variables
representing coordinates. If an <code>sf</code> object, <code>newdata</code> must contain
all variables used by <code>formula(object)</code> and coordinates are obtained
from the geometry of <code>newdata</code>. If omitted, missing data from the
fitted model object are used.</p></dd>


<dt>local</dt>
<dd><p>A optional logical or list controlling the big data approximation
to the spatial residual prediction. If omitted, <code>local</code>
is set to <code>TRUE</code> or <code>FALSE</code> based on the sample size of the fitted
model object and/or the prediction size of <code>newdata</code> -- if the sample
size or prediction size exceeds 5000, <code>local</code> is
set to <code>TRUE</code>, otherwise it is set to <code>FALSE</code>. If <code>FALSE</code>, no big data approximation
is implemented. If a list is provided, the following arguments detail the big
data approximation:</p><ul><li><p><code>method</code>: The big data approximation method. If <code>method = "all"</code>,
all observations are used and <code>size</code> is ignored. If <code>method = "distance"</code>,
the <code>size</code> data observations closest (in terms of Euclidean distance)
to the observation requiring prediction are used.
If <code>method = "covariance"</code>, the <code>size</code> data observations
with the highest covariance with the observation requiring prediction are used.
If random effects and partition factors are not used in estimation and
the spatial covariance function is monotone decreasing,
<code>"distance"</code> and <code>"covariance"</code> are equivalent. The default
is <code>"covariance"</code>. Only used with models fit using <code><a href="splm.html">splm()</a></code>.</p></li>
<li><p><code>size</code>: The number of data observations to use when <code>method</code>
is <code>"distance"</code> or <code>"covariance"</code>. The default is 50. Only used
with models fit using <code><a href="splm.html">splm()</a></code>.</p></li>
<li><p><code>parallel</code>: If <code>TRUE</code>, parallel processing via the
parallel package is automatically used. The default is <code>FALSE</code>.</p></li>
<li><p><code>ncores</code>: If <code>parallel = TRUE</code>, the number of cores to
parallelize over. The default is the number of available cores on your machine.</p></li>
</ul><p>When <code>local</code> is a list, at least one list element must be provided to
initialize default arguments for the other list elements.
If <code>local</code> is <code>TRUE</code>, defaults for <code>local</code> are chosen such
that <code>local</code> is transformed into
<code>list(size = 50, method = "covariance", parallel = FALSE)</code>.</p></dd>


<dt>...</dt>
<dd><p>Other arguments to <code><a href="https://rdrr.io/pkg/ranger/man/predict.ranger.html" class="external-link">ranger::predict.ranger()</a></code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>For <code>spmodRF</code> objects, a vector of predictions. For <code>spmodRF_list</code></p>


<p>objects, a list that contains relevant quantities for each <code>spmodRF</code> object.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>For <code>spmodRF</code> objects, the random forest prediction is combined with
the (empirical) best linear unbiased prediction for the residual. Fox Et al.
call this approach random forest regression Kriging. For <code>spmodRF_list</code> objects,
predictions are returned for each <code>spmodRF</code> object.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Fox, E.W., Ver Hoef, J. M., &amp; Olsen, A. R. (2020). Comparing spatial
regression to random forests for large environmental data sets.
<em>PloS one</em>, 15(3), e0229509.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="va">sulfate</span><span class="op">$</span><span class="va">var</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">NROW</a></span><span class="op">(</span><span class="va">sulfate</span><span class="op">)</span><span class="op">)</span> <span class="co"># add noise variable</span></span></span>
<span class="r-in"><span><span class="va">sulfate_preds</span><span class="op">$</span><span class="va">var</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">NROW</a></span><span class="op">(</span><span class="va">sulfate_preds</span><span class="op">)</span><span class="op">)</span> <span class="co"># add noise variable</span></span></span>
<span class="r-in"><span><span class="va">sprfmod</span> <span class="op">&lt;-</span> <span class="fu"><a href="splmRF.html">splmRF</a></span><span class="op">(</span><span class="va">sulfate</span> <span class="op">~</span> <span class="va">var</span>, data <span class="op">=</span> <span class="va">sulfate</span>, spcov_type <span class="op">=</span> <span class="st">"exponential"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">sprfmod</span>, <span class="va">sulfate_preds</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           1           2           3           4           5           6 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1.43218460 28.53080893  8.03837627 10.17497586 10.81308166 36.46710057 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           7           8           9          10          11          12 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.04473233 12.29349234 16.17456383  7.28704817 -7.21577885  8.18800373 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          13          14          15          16          17          18 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -5.64281665 13.98306496 17.33658907 19.59547121 21.46132654  7.67508539 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          19          20          21          22          23          24 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1.28151885 29.06665010 -0.12472119  5.90915740 -6.54188061  5.54303771 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          25          26          27          28          29          30 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.06576118  5.21284097  9.29580971  0.44480140 19.08291198  0.91680447 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          31          32          33          34          35          36 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -3.00372224 -0.34021944  5.41896099 -0.78675097 -1.32314237  4.51313058 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          37          38          39          40          41          42 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16.10495816  0.34091663  4.10564821  7.24159842  5.39811507 18.30770762 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          43          44          45          46          47          48 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16.63568037 29.08105684  9.71542421 17.50411510 10.51016683  9.52026083 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          49          50          51          52          53          54 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25.73776270  1.86531098 26.41290240  5.51289702  9.02463067  6.75658990 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          55          56          57          58          59          60 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -0.69409482  9.15857382 31.73881375 -4.59133446 12.52464094 20.29690552 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          61          62          63          64          65          66 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23.91502544 13.81611466 14.28972993 13.33502107 28.90004478  3.61744285 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          67          68          69          70          71          72 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6.79289269  6.88577532 19.31395010  9.08781581 11.05990511 26.47688227 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          73          74          75          76          77          78 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9.58579462  1.65772917  5.82828905  9.17553608 14.32630665 -5.38173628 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          79          80          81          82          83          84 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15.24503222 17.08191480 24.89500076 -1.05309265 18.11117474  3.89109963 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          85          86          87          88          89          90 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7.74298803 -2.52345210  7.90531001 -2.79257361 -2.26919797 21.82420656 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          91          92          93          94          95          96 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2.23046312 10.19913397  9.90299107 31.14718744  7.36980655 23.52814022 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          97          98          99         100 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14.78094089 15.96284146 28.32926543 22.13019804 </span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Michael Dumelle, Matt Higham, Jay M. Ver Hoef.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

